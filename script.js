(()=>{"use strict";(()=>{function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var l=0;l<e.length;l++){var i=e[l];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,l,i){return l&&e(t.prototype,l),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t,e,l){return e in t?Object.defineProperty(t,e,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[e]=l,t}var s={ru:[{small:"CapsLock",shift:null,code:"CapsLock"},{small:"ё",shift:"Ё",code:"Backquote"},{small:"1",shift:"!",code:"Digit1"},{small:"2",shift:'"',code:"Digit2"},{small:"3",shift:"№",code:"Digit3"},{small:"4",shift:";",code:"Digit4"},{small:"5",shift:"%",code:"Digit5"},{small:"6",shift:":",code:"Digit6"},{small:"7",shift:"?",code:"Digit7"},{small:"8",shift:"*",code:"Digit8"},{small:"9",shift:"(",code:"Digit9"},{small:"0",shift:")",code:"Digit0"},{small:"-",shift:"_",code:"Minus"},{small:"=",shift:"+",code:"Equal"},{small:"Backspace",shift:null,code:"Backspace"},{small:"Delete",shift:null,code:"Delete"},{small:"Tab",shift:null,code:"Tab"},{small:"й",shift:"Й",code:"KeyQ"},{small:"ц",shift:"Ц",code:"KeyW"},{small:"у",shift:"У",code:"KeyE"},{small:"к",shift:"К",code:"KeyR"},{small:"е",shift:"Е",code:"KeyT"},{small:"н",shift:"Н",code:"KeyY"},{small:"г",shift:"Г",code:"KeyU"},{small:"ш",shift:"Ш",code:"KeyI"},{small:"щ",shift:"Щ",code:"KeyO"},{small:"з",shift:"З",code:"KeyP"},{small:"х",shift:"Х",code:"BracketLeft"},{small:"ъ",shift:"Ъ",code:"BracketRight"},{small:"Enter",shift:null,code:"Enter"},{small:"ф",shift:"Ф",code:"KeyA"},{small:"ы",shift:"Ы",code:"KeyS"},{small:"в",shift:"В",code:"KeyD"},{small:"а",shift:"А",code:"KeyF"},{small:"п",shift:"П",code:"KeyG"},{small:"р",shift:"Р",code:"KeyH"},{small:"о",shift:"О",code:"KeyJ"},{small:"л",shift:"Л",code:"KeyK"},{small:"д",shift:"Д",code:"KeyL"},{small:"ж",shift:"Ж",code:"Semicolon"},{small:"э",shift:"Э",code:"Quote"},{small:"\\",shift:"/",code:"Backslash"},{small:"Shift",shift:null,code:"ShiftLeft"},{small:"/",shift:"|",code:"IntlBackslash"},{small:"я",shift:"Я",code:"KeyZ"},{small:"ч",shift:"Ч",code:"KeyX"},{small:"с",shift:"С",code:"KeyC"},{small:"м",shift:"М",code:"KeyV"},{small:"и",shift:"И",code:"KeyB"},{small:"т",shift:"Т",code:"KeyN"},{small:"ь",shift:"Ь",code:"KeyM"},{small:"б",shift:"Б",code:"Comma"},{small:"ю",shift:"Ю",code:"Period"},{small:".",shift:",",code:"Slash"},{small:"Shift",shift:null,code:"ShiftRight"},{small:"Ctrl",shift:null,code:"ControlLeft"},{small:"Alt",shift:null,code:"AltLeft"},{small:" ",shift:null,code:"Space"},{small:"Alt",shift:null,code:"AltRight"},{small:"Ctrl",shift:null,code:"ControlRight"},{small:"&larr;",shift:null,code:"ArrowLeft"},{small:"&uarr;",shift:null,code:"ArrowUp"},{small:"&darr;",shift:null,code:"ArrowDown"},{small:"&rarr;",shift:null,code:"ArrowRight"},{small:"Win",shift:null,code:"Win"}],en:[{small:"`",shift:"~",code:"Backquote"},{small:"1",shift:"!",code:"Digit1"},{small:"2",shift:"@",code:"Digit2"},{small:"3",shift:"#",code:"Digit3"},{small:"4",shift:"$",code:"Digit4"},{small:"5",shift:"%",code:"Digit5"},{small:"6",shift:"^",code:"Digit6"},{small:"7",shift:"&",code:"Digit7"},{small:"8",shift:"*",code:"Digit8"},{small:"9",shift:"(",code:"Digit9"},{small:"0",shift:")",code:"Digit0"},{small:"-",shift:"_",code:"Minus"},{small:"=",shift:"+",code:"Equal"},{small:"Backspace",shift:null,code:"Backspace"},{small:"Delete",shift:null,code:"Delete"},{small:"Tab",shift:null,code:"Tab"},{small:"q",shift:"Q",code:"KeyQ"},{small:"w",shift:"W",code:"KeyW"},{small:"e",shift:"E",code:"KeyE"},{small:"r",shift:"R",code:"KeyR"},{small:"t",shift:"T",code:"KeyT"},{small:"y",shift:"Y",code:"KeyY"},{small:"u",shift:"U",code:"KeyU"},{small:"i",shift:"I",code:"KeyI"},{small:"o",shift:"O",code:"KeyO"},{small:"p",shift:"P",code:"KeyP"},{small:"[",shift:"{",code:"BracketLeft"},{small:"]",shift:"}",code:"BracketRight"},{small:"Enter",shift:null,code:"Enter"},{small:"CapsLock",shift:null,code:"CapsLock"},{small:"a",shift:"A",code:"KeyA"},{small:"s",shift:"S",code:"KeyS"},{small:"d",shift:"D",code:"KeyD"},{small:"f",shift:"F",code:"KeyF"},{small:"g",shift:"G",code:"KeyG"},{small:"h",shift:"H",code:"KeyH"},{small:"j",shift:"J",code:"KeyJ"},{small:"k",shift:"K",code:"KeyK"},{small:"l",shift:"L",code:"KeyL"},{small:";",shift:":",code:"Semicolon"},{small:"'",shift:'"',code:"Quote"},{small:"\\",shift:"|",code:"Backslash"},{small:"Shift",shift:null,code:"ShiftLeft"},{small:"<",shift:">",code:"IntlBackslash"},{small:"z",shift:"Z",code:"KeyZ"},{small:"x",shift:"X",code:"KeyX"},{small:"c",shift:"C",code:"KeyC"},{small:"v",shift:"V",code:"KeyV"},{small:"b",shift:"B",code:"KeyB"},{small:"n",shift:"N",code:"KeyN"},{small:"m",shift:"M",code:"KeyM"},{small:",",shift:"<",code:"Comma"},{small:".",shift:">",code:"Period"},{small:"/",shift:"?",code:"Slash"},{small:"Shift",shift:null,code:"ShiftRight"},{small:"Ctrl",shift:null,code:"ControlLeft"},{small:"Alt",shift:null,code:"AltLeft"},{small:" ",shift:null,code:"Space"},{small:"Alt",shift:null,code:"AltRight"},{small:"Ctrl",shift:null,code:"ControlRight"},{small:"&larr;",shift:null,code:"ArrowLeft"},{small:"&uarr;",shift:null,code:"ArrowUp"},{small:"&darr;",shift:null,code:"ArrowDown"},{small:"&rarr;",shift:null,code:"ArrowRight"},{small:"Win",shift:null,code:"Win"}]};function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var l=0,i=new Array(e);l<e;l++)i[l]=t[l];return i}function o(t,e){if(t){if("string"==typeof t)return a(t,e);var l=Object.prototype.toString.call(t).slice(8,-1);return"Object"===l&&t.constructor&&(l=t.constructor.name),"Map"===l||"Set"===l?Array.from(t):"Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?a(t,e):void 0}}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var l=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=l){var i,s,a=[],o=!0,n=!1;try{for(l=l.call(t);!(o=(i=l.next()).done)&&(a.push(i.value),!e||a.length!==e);o=!0);}catch(t){n=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(n)throw s}}return a}}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function r(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=function(t,e,l,i){var s,a=null;try{a=document.createElement(t)}catch(t){throw new Error("Unable to create element")}e&&(s=a.classList).add.apply(s,r(e.split(" "))),l&&Array.isArray(l)?l.forEach((function(t){return t&&a.appendChild(t)})):l&&"object"===c(l)?a.appendChild(l):l&&"string"==typeof l&&(a.innerHTML=l),i&&i.appendChild(a);for(var o=arguments.length,h=new Array(o>4?o-4:0),f=4;f<o;f++)h[f-4]=arguments[f];return h.length&&h.forEach((function(t){var e=n(t,2),l=e[0],i=e[1];""===i&&a.setAttribute(l,""),l.match(/value|id|placeholder|cols|rows|autocorrect/)?a.setAttribute(l,i):a.dataset[l]=i})),a},f=l((function e(l){var i=l.small,s=l.shift,a=l.code;t(this,e),this.code=a,this.shift=s,this.small=i,this.isFnKey=Boolean(this.small.match(/Tab|Caps|Shift|Ctrl|Win|Alt|Space|Enter|Del|Back|arr/)),this.shift&&this.shift.match(/[^a-zA-Zа-яА-ЯёЁ0-9]/)?this.subElem=h("div","sub-elem",this.shift):this.subElem=h("div","sub-elem",""),this.symvol=h("div","symvol",i),this.div=h("div","keyboard__key key-".concat(this.code),[this.subElem,this.symvol],null)})),u=l((function e(l){var s=this;t(this,e),i(this,"printToTextArea",(function(t,e){var l=s.textOutput.selectionStart,i=s.textOutput.value.slice(0,l),a=s.textOutput.value.slice(l);t.isFnKey?("Tab"===t.code&&(s.textOutput.value="".concat(i,"\t").concat(a),l+=1),"ArrowLeft"===t.code&&(l=l-1>=0?l-1:0),"ArrowRight"===t.code&&(l+=1),"ArrowUp"===t.code&&(l=l-1>=0?l-1:0),"ArrowDown"===t.code&&(l+=1),"Enter"===t.code&&(s.textOutput.value="".concat(i,"\n").concat(a),l+=1),"Backspace"===t.code&&(s.textOutput.value="".concat(i.slice(0,-1)).concat(a),l-=1),"Delete"===t.code&&(s.textOutput.value="".concat(i).concat(a.slice(1)))):(s.textOutput.value="".concat(i).concat(e).concat(a),l+=1,"Space"===t.code&&(s.textOutput.value="".concat(i," ").concat(a),l+=1)),s.textOutput.setSelectionRange(l,l)})),this.textOutput=h("textarea","text-output",null,l,["placeholder","Please type anything"],["rows",5],["cols",60],["autocorect","off"],["spellcheck",!1]),document.onclick=function(){s.textOutput.focus()}})),d=function(){function e(l){var a=this;t(this,e),i(this,"createLayout",(function(){return a.keyButtons=[],a.rowsLayout.forEach((function(t,e){var l=h("div","keyboard__row row-".concat(e+1),null,a.keyboardDiv);t.forEach((function(t){var e=a.keyLangBase.find((function(e){return e.code===t}));if(e){var i=new f(e);i.div.onmousedown=function(t){a.handleEvent({code:i.code,type:t.type}),i.div.onmouseleave=function(){i.div.classList.remove("active")}},i.div.onmouseup=function(t){a.handleEvent({code:i.code,type:t.type})},a.keyButtons.push(i),l.appendChild(i.div)}}))})),a.keyButtons})),i(this,"handleEvent",(function(t){t.stopPropagation&&t.stopPropagation();var e=t.code,l=t.type,i=a.keyButtons.find((function(t){return t.code===e}));i&&(l.match(/keydown|mousedown/)?(l.match(/key/)&&t.preventDefault(),i.div.classList.add("active"),e.match(/Shift/)&&(a.shiftKey=!0),e.match(/AltLeft/)&&(a.altKey=!0),e.match(/ShiftLeft/)&&a.altKey&&a.changeLanguage(),e.match(/AltLeft/)&&a.shiftKey&&a.changeLanguage(),a.shiftKey&&a.changeUpperKey(!0),e.match(/Caps/)&&!a.isCaps?(a.isCaps=!0,a.changeUpperKey(!0)):e.match(/Caps/)&&a.isCaps&&(a.isCaps=!1,a.changeUpperKey(!1),setTimeout((function(){i.div.classList.remove("active")}))),a.isCaps?a.isCaps&&(a.shiftKey?a.textOutput.printToTextArea(i,i.subElem.innerHTML?i.shift:i.small):a.textOutput.printToTextArea(i,i.subElem.innerHTML?i.small:i.shift)):a.textOutput.printToTextArea(i,a.shiftKey?i.shift:i.small)):l.match(/keyup|mouseup/)&&(e.match(/Shift/)&&(a.shiftKey=!1,a.changeUpperKey(!1)),e.match(/AltLeft/)&&(a.altKey=!1),i.div.classList.remove("active")))})),i(this,"changeLanguage",(function(){var t,e=Object.keys(s),l=e.indexOf(a.keyboardDiv.dataset.language);a.keyLangBase=l+1<e.length?s[e[l+=1]]:s[e[l-=l]],a.keyboardDiv.dataset.language=e[l],t=e[l],window.localStorage.setItem("lang",JSON.stringify(t)),a.keyButtons.forEach((function(t){var e=a.keyLangBase.find((function(e){return e.code===t.code}));if(e){var l=t;l.shift=e.shift,l.small=e.small,e.shift&&e.shift.match(/[^a-zA-Zа-яА-ЯёЁ0-9]/g)?l.subElem.innerHTML=e.shift:l.subElem.innerHTML="",l.symvol.innerHTML=e.small}}))})),this.rowsLayout=l,document.onkeydown=this.handleEvent,document.onkeyup=this.handleEvent}return l(e,[{key:"initialize",value:function(t){this.wrapper=h("div","wrapper main__wrapper",[h("h1","title","Virtual Keyboard"),h("h3","subtitle","Keyboard for Windows"),h("p","disctiption","Shift + Alt for change language")]);var e=h("main","main",this.wrapper);return this.keyLangBase=s[t],this.textOutput=new u(this.wrapper),this.keyboardDiv=h("div","keyboard",null,this.wrapper,["language",t]),document.body.appendChild(e),e.appendChild(this.wrapper),this}},{key:"changeUpperKey",value:function(t){var e=this;t?this.keyButtons.forEach((function(t){var l=t;l.isFnKey||!e.isCaps||e.shiftKey||l.subElem.innerHTML?!l.isFnKey&&e.isCaps&&e.shiftKey?l.symvol.innerHTML=t.small:l.isFnKey||l.subElem.innerHTML||(l.symvol.innerHTML=t.shift):l.symvol.innerHTML=t.shift})):this.keyButtons.forEach((function(t){var l=t;l.subElem.innerHTML&&!l.isFnKey?e.isCaps||(l.symvol.innerHTML=t.small):l.isFnKey||(e.isCaps?l.symvol.innerHTML=t.shift:l.symvol.innerHTML=t.small)}))}}]),e}(),m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return JSON.parse(window.localStorage.getItem(t)||e)}("lang",'"en"');new d([["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Delete"],["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backspace"],["CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter"],["ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","Backslash","ArrowUp","ShiftRight"],["ControlLeft","Win","AltLeft","Space","AltRight","ControlRight","ArrowLeft","ArrowDown","ArrowRight"]]).initialize(m).createLayout()})()})();
//# sourceMappingURL=script.js.map